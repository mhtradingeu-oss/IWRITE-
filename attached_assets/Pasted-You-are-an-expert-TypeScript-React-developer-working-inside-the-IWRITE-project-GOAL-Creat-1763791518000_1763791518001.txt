You are an expert TypeScript + React developer working inside the **IWRITE** project.

ğŸ¯ GOAL
Create a new main section called **â€œSongwriterâ€ (Lyric Writer)** that helps the user generate and refine song lyrics in multiple languages (especially Arabic dialects, German, and English), with support for style profiles and iterative practice.

This Songwriter section should be a specialized version of the AI Writer, focused on lyrics.

1) NAVIGATION & ROUTE
- Add a new sidebar entry: **Songwriter** with a music/pen icon.
- Create a new route/page, e.g. `/songwriter`.

2) LAYOUT (3-COLUMN)

Use a three-column layout similar to AI Writer:

LEFT PANEL â€” SONG IDEA & CONTROLS
- Fields:
  - **Song Idea** (multi-line textarea):
    - Placeholder: â€œØ§ÙƒØªØ¨ ÙÙƒØ±Ø© Ø§Ù„Ø£ØºÙ†ÙŠØ©ØŒ Ø§Ù„Ù‚ØµØ©ØŒ Ø§Ù„Ù…Ø´Ø§Ø¹Ø±ØŒ Ø§Ù„ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©â€¦â€
  - **Language & Dialect** (select):
    - Arabic â€“ Khaliji
    - Arabic â€“ Egyptian
    - Arabic â€“ Levant
    - Arabic â€“ MSA
    - German
    - English (US / UK)
    - Other
  - **Song Type** (select):
    - Romantic
    - Sad / Heartbreak
    - Motivational
    - Social / Message
    - Rap / Trap
    - Pop / Dance
    - National / Inspirational
  - **Song Structure** (select or radio buttons):
    - Intro + Verse 1 + Chorus + Verse 2 + Chorus
    - Verse + Chorus + Bridge + Chorus
    - Rap Verses + Hook
    - Custom (short text input for custom structure)
  - **Rhyme / Rhythm**:
    - Tight rhyme
    - Loose rhyme
    - ABAB
    - AABB
    - AAAA
- Main buttons:
  - Primary: **Generate First Draft**
  - Secondary:
    - â€œRegenerate Verse 1â€
    - â€œRegenerate Chorusâ€
    (These can be implemented later; for now a single â€œGenerate Draftâ€ is enough.)

CENTER PANEL â€” LYRICS EDITOR
- Use the existing rich text editor (or a simplified variant) but adapt it to show:
  - Sections (Intro, Verse 1, Chorus, Verse 2, Bridge, etc.) as headings.
  - Allow the user to manually edit lyrics.
- Add contextual actions for selected text:
  - Improve selection
  - Shorten selection
  - Change rhyme but keep meaning
  - Make more poetic
- Ensure that when the AI returns new lyrics:
  - It populates the structured sections.
  - It does NOT overwrite manual edits unless the user explicitly chooses to regenerate.

RIGHT PANEL â€” STYLE PROFILE, REFERENCES & PRACTICE
- Sections:

  **Style Profile**
  - Dropdown to select an existing Style Profile (reusing the Style Profiles feature).
  - Optional quick link: â€œCreate new style profileâ€ â†’ opens Style Profile UI.
  - When a style profile is selected, its metadata (tone, language, audience, writing rules) should be passed to the Songwriter AI backend.

  **Reference Texts (optional)**
  - Area where the user can:
    - Paste short excerpts of lyrics or poetry they own.
    - Select from uploaded text documents.
  - IMPORTANT: these references should be used to extract **style characteristics**, not to copy exact text.
  - Store reference snippets in the DB linked to the style profile or the current project.
  
  **Practice / Feedback**
  - For each generated section (Intro, Verse, Chorus), show:
    - A small row of feedback buttons:
      - ğŸ‘ â€œKeepâ€ / â€œGood styleâ€
      - ğŸ‘ â€œNot goodâ€
  - Store this feedback in the database (e.g. on a `songwriter_feedback` table) with:
    - section type,
    - style profile ID,
    - timestamp,
    - optional short user note.
  - This feedback will later be used to build better few-shot examples in prompts (even if we donâ€™t fully automate that yet).

3) BACKEND ENDPOINT(S)

Add a dedicated backend endpoint for the Songwriter engine, e.g.:

- `POST /api/songwriter/generate`

Payload should include:
- `songIdea`
- `language`
- `dialect`
- `songType`
- `structure` (e.g. â€œintro,verse,chorus,verse,chorusâ€)
- `rhymePattern` (e.g. "tight", "loose", "AABB", etc.)
- `styleProfileId` (optional)
- `referenceSnippetIds` or raw reference texts (optional)
- optional: existing lyrics (for partial regeneration / improvement).

Response should include:
- Structured lyrics, for example:
  - `intro: string[]`
  - `verse1: string[]`
  - `chorus: string[]`
  - `verse2: string[]`
  - `bridge: string[]`
- plus any metadata if needed.

Wire this endpoint to the center editor so the sections are populated correctly.

4) â€œLEARNING FROM PRACTICEâ€ (APP-LEVEL, NOT MODEL TRAINING)

- Create a simple mechanism to record user feedback about generated sections:
  - When the user clicks ğŸ‘ or ğŸ‘ on a section:
    - POST to `/api/songwriter/feedback` with:
      - section content
      - section type (intro/verse/chorus/bridge)
      - styleProfileId (if any)
      - rating (1 or -1)
      - optional comment.
- This will **not** retrain the base model, but:
  - In future prompts for the same styleProfileId, we can:
    - Include a few â€œpositiveâ€ examples as few-shot demonstrations.
  - For now, at minimum, store the data and design the API so this extension is possible later.

5) UI/UX DETAILS

- Keep the same Fluent-like, dark workspace style.
- Make the lyrics editor background slightly lighter than the app background for readability.
- Make sure the entire section works for RTL:
  - When language is Arabic, align lyrics right.
  - For German/English, align left.
- Add clear loading indicators when generating lyrics.
- Handle errors gracefully with toasts.

6) IMPLEMENTATION & SUMMARY

- Reuse existing patterns from AI Writer (requests, loading state, error handling).
- Keep all TypeScript types strict.
- At the end, provide a summary:
  - Files created/modified (frontend & backend).
  - How to access the Songwriter section in the UI.
  - How to trigger a basic generation flow (step-by-step).

The goal: a clean, focused **Songwriter** section that can:
- Take a song idea + style profile,
- Generate structured song lyrics (intro, verses, chorus...),
- Allow editing and feedback,
- Store reference snippets and feedback for future iterative improvement.
