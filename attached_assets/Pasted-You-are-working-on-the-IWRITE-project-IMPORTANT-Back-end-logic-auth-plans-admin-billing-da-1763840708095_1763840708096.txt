You are working on the IWRITE project.

IMPORTANT:  
Back-end logic, auth, plans, admin, billing, daily limits, and database are already implemented and considered correct.  
Your task in this turn is **ONLY** to fix and polish the **UI layer**:

- Routes & pages
- Navigation (sidebar, header, footer)
- Click behavior and redirections
- Loading/empty/error states in the UI

You MUST NOT:
- Change API endpoints, DB schema, or env var names
- Change auth logic, plan logic, admin logic, or billing logic
- Move or modify QueryClientProvider setup
- Remove existing security checks

You MAY:
- Edit React components, routes, and client-side navigation
- Add/adjust UI state (loading, error banners, disabled buttons)
- Fix imports and page registrations
- Adjust text, labels, icons, and layout for clarity

The goal is to make the entire UI **feel complete, consistent, and free of 404s or dead links.**

--------------------------------------------------
PART 1 – ROUTES & PAGES (NO 404s)
--------------------------------------------------

1) Find the main client routing setup:
   - `client/src/App.tsx` and any router config files
   - The main layout that renders sidebar + content + footer

2) Ensure that the following paths are defined and mapped to valid React page components (no 404):

   Workspace / Product:
   - `/dashboard`
   - `/ai-writer`
   - `/songwriter`
   - `/documents`
   - `/file-uploads`
   - `/templates`
   - `/style-profiles`
   - `/search`
   - `/topics`
   - `/archive`
   - `/settings`
   - `/admin` (route exists; access control is handled on backend)

   Legal:
   - `/legal/imprint`
   - `/legal/privacy`
   - `/legal/terms`
   - `/legal/payment`

   Billing / Upgrade:
   - `/upgrade/success` (or whatever success route exists)

3) Make sure:
   - The **404 / NotFound** component is only used as a catch-all route (e.g. `path="*"`), and does not override valid routes.
   - The root `/` route:
     - After auth, redirects to a real page (e.g. `/dashboard`).

4) If any of the above pages are missing:
   - Create simple React pages for them with basic headings and layout consistent with the rest of the app.
   - Use existing design tokens / components (cards, headings, sections).

--------------------------------------------------
PART 2 – SIDEBAR, HEADER, AND FOOTER NAVIGATION
--------------------------------------------------

1) Sidebar (`client/src/components/AppSidebar.tsx` or similar):

   - Ensure each item’s `to` / `href` matches the registered routes:

     - Dashboard       → `/dashboard`
     - AI Writer       → `/ai-writer`
     - Songwriter      → `/songwriter`
     - Documents       → `/documents`
     - File Uploads    → `/file-uploads`
     - Templates       → `/templates`
     - Style Profiles  → `/style-profiles`
     - Search          → `/search`
     - Topics          → `/topics`
     - Archive         → `/archive`
     - Settings        → `/settings`
     - Admin (visible only when `user.role === "admin"`) → `/admin`

   - Fix any mismatched strings or missing imports so clicking each item reliably navigates to the correct page without 404.

2) Footer:

   - Confirm the footer is rendered inside the main layout (not duplicated per page).
   - Verify footer links:
     - Imprint        → `/legal/imprint`
     - Privacy Policy → `/legal/privacy`
     - Terms of Use   → `/legal/terms`
     - Payment Policy → `/legal/payment`
   - Ensure these links use the same router navigation (Link/ NavLink) so the app doesn’t do a full page reload unless intended.

3) Header / Quick Actions:

   - On Dashboard and other pages, check any “Quick Actions” buttons:
     - “Create New Document”
     - “Upload Files”
     - “Manage Templates”
   - Make sure their onClick / links navigate to the correct route or open the right modal (no 404, no dead clicks).

--------------------------------------------------
PART 3 – CLICK FLOWS & REDIRECTIONS
--------------------------------------------------

In this part, focus on **click behavior and redirection**, not server logic.

1) Auth-related UI:

   - After successful login:
     - User should be redirected to `/dashboard`.
   - If an unauthenticated user lands on a protected route:
     - They should be redirected to login (or landing) page, not stuck on a blank or 404 page.
   - Do NOT change how tokens/cookies are handled—just ensure redirections and UI states are correct.

2) Settings → Plan & Upgrade:

   - FREE user:
     - Settings page should show:
       - Current plan (FREE)
       - Usage statistics
       - Upgrade call-to-action
     - Click “Upgrade”:
       - If Stripe is NOT configured:
         - Show a clear, friendly banner (e.g. amber alert).
         - Button can be disabled or show an inline message.
         - No crash, no confusing error toast.

   - PRO user:
     - Settings page should show:
       - Current plan (PRO / Paid)
     - Upgrade button should be hidden or disabled to avoid confusion.

3) Admin UI:

   - Only admin users see the “Admin” entry in the sidebar.
   - Clicking Admin:
     - Loads the Admin page with users table, not a 404.
   - Non-admin users:
     - Should NOT see the Admin link in sidebar.
     - If they manually type `/admin`:
       - Show a friendly “Forbidden / Admin only” message (UI), not a blank/404 page.

4) Legal Pages:

   - Clicking each footer link should open the correct legal page with a proper title and content section.
   - No 404 in these pages.
   - Add a simple consistent layout (header/title, body text, back link to Dashboard if appropriate).

5) Document & Template Flows (UI only):

   - In Documents page:
     - “New Document” / “Open” / “Edit” buttons should navigate or open the correct views.
   - In Templates:
     - “Create Template”, “Edit”, “Preview” actions should:
       - Open the expected modals/pages.
       - Close correctly via cancel/close buttons (no stuck overlays).

   - Do NOT change how saving to backend works; just ensure the UI reacts correctly on click and after success/error (loading states, disabled buttons, close modals).

--------------------------------------------------
PART 4 – LOADING, EMPTY, AND ERROR STATES (UI ONLY)
--------------------------------------------------

For all main pages, ensure the **visual states** are clean:

1) When data is loading (React Query status = loading):
   - Show a consistent loading spinner or skeleton in the content area.
   - Avoid briefly flashing “404” or “No data” during loading.

2) When lists are empty (no documents, no templates, no topics):
   - Show a friendly empty-state message with a clear primary action:
     - e.g. “No documents yet. Create your first document.”

3) When there is a recoverable UI error (e.g., network error from API):
   - Show a non-blocking error banner or toast.
   - Do not show the 404 page unless it’s truly a missing route.

Again: **do not** change the backend logic; the focus is only on how the UI reacts.

--------------------------------------------------
PART 5 – VERIFICATION (UI NAVIGATION ONLY)

After all UI fixes:

1) Run `npm run build` to ensure UI code compiles.

2) Start the dev server (`npm run dev`) and, in the browser, test:

   As FREE user (`test@example.com / Test1234`):
   - Sidebar:
     - Click each item: Dashboard, AI Writer, Songwriter, Documents, File Uploads, Templates, Style Profiles, Search, Topics, Archive, Settings.
     - Confirm each route loads the correct page and no longer shows the 404 page.
   - Footer:
     - Click Imprint, Privacy Policy, Terms of Use, Payment Policy.
     - Confirm each loads its page.
   - Settings:
     - Confirm upgrade banner and usage stats render correctly with Stripe-not-configured handling.

   As PRO/admin user (`mhtrading@gmail.com / test@123`):
   - Confirm Admin link appears in sidebar.
   - Clicking Admin loads the admin dashboard (no 404).
   - Other pages still work as above.

3) Summarize:

   - Which UI files (components, pages, routes) you changed.
   - What the root cause of the 404 / navigation issues was.
   - Confirmation that:
     - All main pages are reachable by click from sidebar/footer.
     - Upgrade and admin UI flows work at the UI/navigation level.
     - No backend logic was changed.

The goal of this task is to perform a **deep, UI-focused pass** to ensure:

- Every page is reachable.
- Every link and button does something sensible.
- Redirections make sense.
- The user never sees a 404 unless they truly visit an unknown path.

No business logic changes, only UI, pages, clicks, directions, and redirection.
